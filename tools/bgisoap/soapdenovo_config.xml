<tool id="soapdenovo_config" name="SOAPdenovo_config" version="0.1">
    <description>- Key parameters to set up the SOAPdenovo tool</description>
    <requirements>
        <requirement type="binary">soapdenovo</requirement>
    </requirements>
    <command interpreter="python">
	soapdenovo_config.py 
	$output
	$max_rd_len
    #for $rinput in $input1
        ${rinput.avg_ins}
        ${rinput.reverse_seq}
        ${rinput.asm_flags}
        ${rinput.rank}
        ${rinput.q1}
        ${rinput.q2}
        ${rinput.f1}
        ${rinput.f2}
        ${rinput.q}
        ${rinput.f}
        ${rinput.p}
    #end for
  </command>
  <inputs>
      <param name="max_rd_len" type="integer" format="input" label="Maximal read length" value="50" optional="true" help=""/>
      <!-- [LIB] -->
      <repeat name="input1" title="Datasets">
          <param name="avg_ins" type="integer" format="input" label="Average insert size" value="200" optional="true"/>
          <param name="reverse_seq" type="integer" label="If sequence needs to be reversed" value="0" optional="true"
             help=""/>
          <param name="asm_flags" type="integer" label="In which part(s) the reads are used" value="3" optional="true"/>
          <param name="rank" type="integer" label="In which order the reads are used while scaffolding" value="1" optional="true"
             help=""/>
          <param name="q1" type="data" label="Fastq file for read 1"  optional="true"/>
          <param name="q2" type="data" label="Fastq file for read 2 always follows fastq file for read 1" optional="true"/>
          <param name="f1" type="data" label="Fasta file for read 1"  optional="true"/>
          <param name="f2" type="data" label="Fasta file for read 2 always follows fasta file for read 1" optional="true"/>
          <param name="q" type="data" label="Fastq file for single reads"  optional="true"/>
          <param name="f" type="data" label="Fasta file for single reads" optional="true"/>
          <param name="p" type="data" label="A single fasta file for paired reads" optional="true"/>      
      </repeat>
  </inputs>
  <outputs>
      <data name="output" format="tabular">
      </data>
  </outputs>
  <tests>
    <test>
      <param name="max_rd_len" value="50"/>
      <output name="output" value="hello world"/>
  </test>
 </tests>
<help>

**What it does**

Configuration file

For big genome projects with deep sequencing, the data is usually organized as multiple read sequence files generated from multiple libraries. So you have to instruct the program where to find the input data. "example.config" demonstrates how to organize the information and make configuration file.

The configuration file has a section of global information, and then multiple library sections. The library information and the information of sequencing data generated from the library should be organized in the corresponding library section. Right now only the information of maximal read length is included in the global information section. Each library section starts with tag [LIB] and is followed by read file names along with their paths, read file format, average insert size, library ranks and two other flags that tell the assembler how to treat these reads.

The assembler accepts read file in two formats: FASTA or FASTQ. Mate-pair relationship could be indicated in two ways: two sequence files with reads in the same order belonging to a pair, or two adjacent reads in a single file (FASTA only) belonging to a pair.

Libraries with the same "rank" are used at the same time for scaffolding in the order indicated by "rank".

The flag "asm_flag" has three eligible values: 1 (reads only used for contig assembly), 2 (only used for scaffold assembly) and 3 (used for both contig and scaffold assembly).

There are two types of paired-end libraries: a) forward-reverse, generated from fragmented DNA ends with typical insert size less than 800 bp; b) reverse-forward, generated from circularizing libraries with typical insert size greater than 2 Kb. User should set parameter for tag "reverse_seq" to indicate this: 0, forward-reverse; 1, reverse-forward.

For detailed information on SOAPdenovo, click here_.

.. _here: http://soap.genomics.org.cn/soapdenovo.html

</help>
</tool>
